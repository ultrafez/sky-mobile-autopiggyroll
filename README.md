# Sky Mobile AutoPiggyRoll

Automatically roll data back from your Sky Mobile Piggybank to your SIM cards when their remaining data allowance runs low.

Utilises the Playwright automation test framework to screenscrape the Sky website using Chromium to get SIM card data balances, and roll data back to each SIM if needed.

## Setup

Using Node 20 (may work on other versions, untested) - `npm install`

Copy `.env.example` to `.env` and set configuration values:

* `USERNAME` - Your Sky username
* `PASSWORD` - Your Sky password
* `GB_TO_ROLL` - The number of gigabytes to roll when the balance is below the threshold
* `MIN_GB_BEFORE_ROLLING` - The minimum amount of data a SIM card must have remaining before rolling

## Usage with Node

Configuration values from `.env` are used when running.

`npx playwright test`

## Usage with Docker

### Build the image:

`docker build -t ultrafez/sky-mobile-autopiggyroll .`

### Run the image:

This assumes that you have a `.env` file in the current directory

`docker run --rm --env-file .env ultrafez/sky-mobile-autopiggyroll`

## Development

Follows a standard Playwright project as generated by the Playwright npm init script.

Checking balances and rolling where required is all performed as a single "test case".

## Aspirations

* Improve these docs
* Package this up using Docker
* Run periodically on cloud infra (for my personal use)
* Make easy for others to run on their own/cloud infra (for their personal use)
